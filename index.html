<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Official Job Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #e3f2fd; font-family: 'Segoe UI', sans-serif; }
        .header { background: #01579b; color: white; padding: 20px 0; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        .section-title { font-weight: bold; margin: 20px 0 10px 0; border-bottom: 2px solid #ccc; padding-bottom: 5px; }
        .text-active { color: #2e7d32; border-color: #2e7d32; }
        .text-upcoming { color: #ef6c00; border-color: #ef6c00; }

        .job-card { border: none; border-radius: 8px; margin-bottom: 15px; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .card-active { border-left: 5px solid #2e7d32; }
        .card-upcoming { border-left: 5px solid #ef6c00; background: #fff3e0; }

        /* BUTTON STYLES */
        .btn-official { background-color: #0277bd; color: white; width: 100%; font-weight: 600; border-radius: 5px; }
        .btn-official:hover { background-color: #01579b; color: white; }
        
        .btn-short { background-color: #ef6c00; color: white; width: 100%; font-weight: 600; border-radius: 5px; }
        .btn-short:hover { background-color: #e65100; color: white; }

        .source-badge { font-size: 0.75rem; background: #eee; padding: 2px 6px; border-radius: 4px; color: #555; }
    </style>
</head>
<body>

    <div class="header text-center">
        <h3>üáÆüá≥ Official Job Notifications</h3>
        <p class="mb-0 small">SSC | Army | BSF | WBP</p>
        <small class="text-warning" id="last-updated">Updating...</small>
    </div>

    <div class="container">
        
        <h5 class="section-title text-active">‚úÖ Active Applications</h5>
        <div id="active-container" class="row">
            <div class="col-12 text-center"><div class="spinner-border text-success"></div></div>
        </div>

        <h5 class="section-title text-upcoming">üìÖ Upcoming / Short Notices</h5>
        <div id="upcoming-container" class="row"></div>

    </div>

    <script>
        fetch('jobs.json').then(res => res.json()).then(data => {
            document.getElementById('last-updated').innerText = "Last Check: " + data.last_updated;
            render(data.active, 'active-container', 'active');
            render(data.upcoming, 'upcoming-container', 'upcoming');
        });

        function render(jobs, containerId, type) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            if (jobs.length === 0) {
                container.innerHTML = '<div class="alert alert-light text-center">No updates from official sites today.</div>';
                return;
            }

            jobs.forEach(job => {
                const cardClass = type === 'active' ? 'card-active' : 'card-upcoming';
                
                // BUTTON LOGIC
                let buttonHtml = '';
                if (type === 'active') {
                    buttonHtml = `<a href="${job.link}" target="_blank" class="btn btn-official btn-sm">Official Notification ‚¨á</a>`;
                } else {
                    buttonHtml = `<a href="${job.link}" target="_blank" class="btn btn-short btn-sm">Short Notification üëÅ</a>`;
                }

                const html = `
                    <div class="col-md-6 col-lg-4">
                        <div class="card job-card ${cardClass}">
                            <div class="card-body">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="source-badge">üåê ${job.source}</span>
                                    <small class="text-muted fw-bold">${job.date}</small>
                                </div>
                                <h6 class="card-title fw-bold">${job.title}</h6>
                                <div class="mt-3">
                                    ${buttonHtml}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }
    </script>
</body>
</html>
